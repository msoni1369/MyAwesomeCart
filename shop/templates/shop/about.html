<!--below line shows the inheritence of basic.html into about.html-->
{% extends 'shop/basic.html' %}

{% block title%} About Us{% endblock %}

{% block body %} 

<main role="main">

  <div id="myCarousel" class="carousel slide" data-ride="carousel">
    <ol class="carousel-indicators">
      <li data-target="#myCarousel" data-slide-to="0" class=""></li>
      <li data-target="#myCarousel" data-slide-to="1" class="active"></li>
      <li data-target="#myCarousel" data-slide-to="2" class=""></li>
    </ol>
    <div class="carousel-inner">
      <div class="carousel-item">
        <svg class="bd-placeholder-img" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice" focusable="false" role="img"><rect width="100%" height="100%" fill="#777"></rect></svg>
        <div class="container">
          <div class="carousel-caption text-left">
            <h1>Example headline.</h1>
            <p>Sign up today in My Awesome Cart so that you will be notified when new products are added at our shop.</p>
            <p><a class="btn btn-lg btn-primary" href="/signin" role="button">Sign up today</a></p>
          </div>
        </div>
      </div>
      <div class="carousel-item active">
        <svg class="bd-placeholder-img" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice" focusable="false" role="img"><rect width="100%" height="100%" fill="#777"></rect></svg>
        <div class="container">
          <div class="carousel-caption">
            <h1>My Awesome Cart</h1>
            <p>My Awesome Cart is e-commerce startup based in India provide wide range of products at affordable prices. </p>
            <p><a class="btn btn-lg btn-primary" href="/shop/contact" role="button">Contact Us</a></p>
          </div>
        </div>
      </div>
      <div class="carousel-item">
        <svg class="bd-placeholder-img" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice" focusable="false" role="img"><rect width="100%" height="100%" fill="#777"></rect></svg>
        <div class="container">
          <div class="carousel-caption text-right">
            <h1>One more for good measure.</h1>
            <p>There are wide range of products based on categories like Pantry, Electronics, Attire,Luggage & Backpacks and Watches at affodable prices.</p>
            <p><a class="btn btn-lg btn-primary" href="/shop" role="button">Browse Products</a></p>
          </div>
        </div>
      </div>
    </div>
    <a class="carousel-control-prev" href="#myCarousel" role="button" data-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next" href="#myCarousel" role="button" data-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="sr-only">Next</span>
    </a>
  </div>


  <!-- Marketing messaging and featurettes
  ================================================== -->
  <!-- Wrap the rest of the page in another container to center all the content. -->

  <div class="container marketing">

    <!-- Three columns of text below the carousel -->
    <div class="row">

      <div class="col-lg-12" >
        <img src="/media/Mayank.jpg" class="bd-placeholder-img rounded-circle" width="140" height="140"  preserveAspectRatio="xMidYMid slice" focusable="false" role="img" aria-label="Placeholder: 140x140"><rect width="100%" height="100%" fill="#777" ></rect></img>
        <h2>Mayank Soni</h2>
        <p>Founder of My Awesome Cart, Graduated from Arya Institute of Engineering & Technology in Computer Science Branch. He is currently working at Capgemini india pvt. ltd. For more information follow me on linkledln.</p>
        <p><a class="btn btn-secondary" href="#" role="button">View details »</a></p>
      </div><!-- /.col-lg-4 -->
     
    </div><!-- /.row -->


    <!-- START THE FEATURETTES -->

    <hr class="featurette-divider">

    <div class="row featurette">
      <div class="col-md-5">
        <h2 class="featurette-heading">First featurette. <span class="text-muted">It’ll blow your mind.</span></h2>
        <p class="lead">My Awesome Cart have very wide range of products categorizes according to their categories.My Awesome Cart provides several features.</p>
      </div>
      <div class="col-md-4">
        <img src="/media/prod.png"class="bd-placeholder-img bd-placeholder-img-lg featurette-image mx-auto" width="700" height="500" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice" focusable="false" role="img" aria-label="Placeholder: 500x500"><title>Placeholder</title><rect width="100%" height="100%" fill="#eee"></rect></img>
      </div>
    </div>

    <hr class="featurette-divider">

    <div class="row featurette">
      <div class="col-md-7 order-md-2">
        <h2 class="featurette-heading">Oh yeah, it’s that good. <span class="text-muted">See for yourself.</span></h2>
        <p class="lead">My Awesome Cart have dynamic cart addition. Customer can see all its items in cart with just one click.</p>
      </div>
      <div class="col-md-5 order-md-1">
        <img src="/media/cart.png" class="bd-placeholder-img bd-placeholder-img-lg featurette-image img-fluid mx-auto" width="500" height="500" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice" focusable="false" role="img" aria-label="Placeholder: 500x500"><title>Placeholder</title><rect width="100%" height="100%" fill="#eee"></rect></svg>
      </div>
    </div>

    <hr class="featurette-divider">

    <div class="row featurette">
      <div class="col-md-5">
        <h2 class="featurette-heading">And lastly, this one. <span class="text-muted">Checkmate.</span></h2>
        <p class="lead">My Awesome Cart provides easy and less detail requirement checkout. Customer don't have to visit more pages for placing his order and customer can place his/her order with minimum details required.</p>
      </div>
      <div class="col-md-5">
        <img src="/media/checkout.png"class="bd-placeholder-img bd-placeholder-img-lg featurette-image  mx-auto" width="700" height="500" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice" focusable="false" role="img" aria-label="Placeholder: 500x500"><title>Placeholder</title><rect width="100%" height="100%" fill="#eee"></rect></text></img>
      </div>
    </div>

    <hr class="featurette-divider">

    <!-- /END THE FEATURETTES -->

  </div><!-- /.container -->


  <!-- FOOTER -->
  <footer class="container">
    <p class="float-right"><a href="#">Back to top</a></p>
    <p>© 2019-2021 My Awesome Cart, Inc.  </p>
  </footer>
</main>

{% endblock %}
{% block js %}
<script type="text/javascript">
//code from 133-232 does the following work (1.)takes the cart from local storage (2.)set and shows the contents of popover button (3.)shows the buttons inside popover(Clear cart and Checkout) and do their specific fuctions.

//Find out the cart items from localStorage and showing no. of items in cart(50-63)
if (localStorage.getItem('cart') == null) {
    var cart = {};
} else {
    cart = JSON.parse(localStorage.getItem('cart'));
}
var sum = 0;
for (item in cart) {
     let qty = cart[item][0];
     sum = sum + qty;        
}

//setting value of sum to cart 
document.getElementById('cart').innerHTML = sum;

//prints value of cart on console
console.log(cart)

   $('.divpr').on('click', 'button.cart', function(){
    var idstr = this.id.toString();
    if (cart[idstr] != undefined) {
        qty = cart[idstr][0] + 1;
    } else {
        qty = 1;
        name = document.getElementById('name'+idstr).innerHTML;
        price = document.getElementById('price'+idstr).innerHTML;
        cart[idstr] = [qty, name, parseInt(price)];
    }
});

//Add Popover to cart
$('#popcart').popover();
updatePopover(cart);

//defining popover
function updatePopover(cart) {
  //getting cart from local storage
  if (localStorage.getItem('cart') == null){
    var cart = {};
  } 
  else
  {
    cart = JSON.parse(localStorage.getItem('cart'));
  }

  //calculating total number of items(sum)
  var sum = 0;
  for (item in cart) 
  {
    let name = cart[item][1];
    let qty = cart[item][0];
    sum = sum + qty;        
  }

  var popStr = "";
  popStr = popStr + "<h5> Cart for your items in my shopping cart </h5><div class='mx-2 my-2'>";
  var i = 1;
  for (var item in cart) 
  {
    popStr = popStr + "<b>" + i + "</b>. ";
    popStr = popStr + cart[item][1].slice(0, 19) + "... Qty: " + cart[item][0] + '<br>';
    i = i + 1;
  }

  //creating 'Clear Cart' and 'Checkout' buttons
  popStr = popStr + "</div> <a href='/shop/checkout'><button class='btn btn-primary' id ='checkout'>Checkout</button></a> <button class='btn btn-primary' onclick='clearCart()' id ='clearCart'>Clear Cart</button>"

  //set data-content attribute of popover to popStr
  document.getElementById('popcart').setAttribute('data-content', popStr);
    
  //hide the popover and show the popover on click
  $('#popcart').popover('hide');
}


//this functions clears the cart and updates the cart
function clearCart() {
    cart = JSON.parse(localStorage.getItem('cart'));

    localStorage.clear();
    cart = {};
    updateCart(cart);
}

//this function updates the cart
function updateCart(cart) {    

    localStorage.setItem('cart', JSON.stringify(cart));
    sum=0
    document.getElementById('cart').innerHTML = sum
    updatePopover(cart);

}

//setting value of sum to cart 
document.getElementById('cart').innerHTML = sum;

</script>
{% endblock %}

{% block css %}
/* GLOBAL STYLES
-------------------------------------------------- */
/* Padding below the footer and lighter body text */

body {
  padding-top: 0rem;
  padding-bottom: 3rem;
  color: #5a5a5a;
}


/* CUSTOMIZE THE CAROUSEL
-------------------------------------------------- */

/* Carousel base class */
.carousel {
  margin-bottom: 4rem;
}
/* Since positioning the image, we need to help out the caption */
.carousel-caption {
  bottom: 3rem;
  z-index: 10;
}

/* Declare heights because of positioning of img element */
.carousel-item {
  height: 32rem;
}
.carousel-item > img {
  position: absolute;
  top: 0;
  left: 0;
  min-width: 100%;
  height: 32rem;
}


/* MARKETING CONTENT
-------------------------------------------------- */

/* Center align the text within the three columns below the carousel */
.marketing .col-lg-4 {
  margin-bottom: 1.5rem;
  text-align: center;
}
.marketing h2 {
  font-weight: 400;
}
.marketing .col-lg-4 p {
  margin-right: .75rem;
  margin-left: .75rem;
}


/* Featurettes
------------------------- */

.featurette-divider {
  margin: 5rem 0; /* Space out the Bootstrap <hr> more */
}

/* Thin out the marketing headings */
.featurette-heading {
  font-weight: 300;
  line-height: 1;
  letter-spacing: -.05rem;
}


/* RESPONSIVE CSS
-------------------------------------------------- */

@media (min-width: 40em) {
  /* Bump up size of carousel content */
  .carousel-caption p {
    margin-bottom: 1.25rem;
    font-size: 1.25rem;
    line-height: 1.4;
  }

  .featurette-heading {
    font-size: 50px;
  }
}

@media (min-width: 62em) {
  .featurette-heading {
    margin-top: 7rem;
  }
}

{% endblock %}